<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>For Yuvi ‚ù§Ô∏è</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@latest/dist/confetti.browser.min.js"></script>
  <script src="https://unpkg.com/scratchcard-js"></script>
  <style>
    :root {
      --main-color: #ff4f81;
      --font-lg: 3em;
      --font-md: 1.4em;
      --font-sm: 1.2em;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      color: white;
      text-align: center;
      overflow-x: hidden;
    }

    @keyframes gradient {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    h1 {
      margin-top: 12vh;
      font-size: var(--font-lg);
      font-weight: bold;
      padding: 0 10px;
    }

    .countdown {
      margin-top: 10px;
      font-size: 1.3em;
      background: rgba(255, 255, 255, 0.15);
      padding: 10px 20px;
      border-radius: 20px;
      display: inline-block;
      color: #fff9f9;
      backdrop-filter: blur(8px);
    }

    .typewriter {
      width: 90%;
      margin: 30px auto;
      font-size: var(--font-md);
      white-space: pre-wrap;
      border-right: 2px solid white;
      overflow: hidden;
      animation: typing 6s steps(40, end), blink-caret 0.8s step-end infinite;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 90%; }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: white; }
    }

    .moon-scene {
      display: block;
      width: 100%;
      height: auto;
      max-height: 90vh;
      object-fit: cover;
      margin: 30px 0 10px;
      animation: fadeIn 2s ease-in-out;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .caption {
      font-size: var(--font-sm);
      font-style: italic;
      margin-bottom: 30px;
      color: #fff5f5;
      padding: 0 10px;
    }

    .secret-btn {
      margin: 20px auto;
      background: #fff;
      color: var(--main-color);
      border: none;
      border-radius: 50px;
      padding: 15px 30px;
      font-size: 1.1em;
      cursor: pointer;
      font-weight: bold;
      animation: pulse 2s infinite;
      transition: all 0.3s ease;
      max-width: 90%;
    }

    .secret-btn:hover {
      transform: scale(1.05);
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 79, 129, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(255, 79, 129, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 79, 129, 0); }
    }

    .secret-message {
      display: none;
      margin: 30px auto;
      font-size: var(--font-md);
      animation: fadeIn 2s ease-in;
      white-space: pre-wrap;
      padding: 0 20px;
      max-width: 90%;
    }

    #reply-box textarea {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      border: none;
      font-size: 1.1em;
      resize: none;
    }

    #reply-box button {
      margin-top: 10px;
      padding: 10px 25px;
      border: none;
      border-radius: 25px;
      background: white;
      color: var(--main-color);
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
    }

    .scratch-container {
      margin: 40px auto;
      max-width: 300px;
    }

    .footer {
      position: relative;
      bottom: 20px;
      width: 100%;
      font-size: 1.1em;
      color: #fff;
      margin-top: 40px;
    }

    .hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .pulsing-heart {
      position: absolute;
      font-size: 24px;
      animation: pulseFloat 6s ease-in-out infinite;
      opacity: 0.8;
      user-select: none;
    }

    @keyframes pulseFloat {
      0% { transform: translateY(100vh) scale(1); opacity: 1; }
      50% { transform: translateY(50vh) scale(1.3); opacity: 0.7; }
      100% { transform: translateY(-10vh) scale(1); opacity: 0; }
    }

    .hug-animation {
      display: none;
      margin: 20px auto;
      max-width: 90%;
      animation: fadeIn 1s ease-in;
    }

    .hug-animation img {
      max-width: 100%;
      height: auto;
      border-radius: 15px;
    }

    .reasons-container {
      margin: 30px auto;
      max-width: 90%;
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      max-height: 300px;
      overflow-y: auto;
    }

    .reasons-container ul {
      padding-left: 20px;
      text-align: left;
    }

    .reasons-container li {
      margin-bottom: 10px;
      line-height: 1.5;
      font-size: 1.1em;
    }

    /* Love Letter Styles */
    .love-letter-container {
      margin: 30px auto;
      max-width: 600px;
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      animation: fadeIn 1s ease-in;
      font-family: 'Georgia', serif;
      text-align: left;
    }

    .love-letter-content {
      line-height: 1.8;
      font-size: 1.1em;
    }

    .letter-date {
      text-align: right;
      color: #666;
      font-style: italic;
      margin-bottom: 20px;
      font-size: 0.9em;
    }

    .letter-greeting {
      font-size: 1.3em;
      color: var(--main-color);
      margin-bottom: 20px;
      font-weight: bold;
    }

    .letter-body {
      margin: 25px 0;
      line-height: 2;
      text-align: justify;
    }

    .letter-closing {
      margin-top: 30px;
      text-align: right;
      font-style: italic;
      color: var(--main-color);
      font-weight: bold;
    }

    .saved-letters-container {
      margin: 30px auto;
      max-width: 90%;
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 20px;
      max-height: 400px;
      overflow-y: auto;
    }

    .saved-letters-container h3 {
      color: #fff;
      margin-bottom: 20px;
      font-size: 1.5em;
    }

    .saved-letter-item {
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 10px;
      text-align: left;
      font-family: 'Georgia', serif;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .saved-letter-item:hover {
      transform: scale(1.02);
    }

    .saved-letter-preview {
      font-size: 0.9em;
      line-height: 1.4;
      margin-top: 8px;
      color: #555;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Romantic Animations */
    .falling-petals {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .petal {
      position: absolute;
      color: #ffb3d1;
      font-size: 20px;
      animation: fall linear infinite;
      opacity: 0.8;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      50% {
        transform: translateY(50vh) rotate(180deg);
        opacity: 0.8;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    .shooting-star {
      position: fixed;
      top: 10%;
      right: -50px;
      color: #fff;
      font-size: 16px;
      animation: shoot 3s linear;
      pointer-events: none;
      z-index: 2;
    }

    @keyframes shoot {
      0% {
        transform: translateX(0) translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateX(-100vw) translateY(80vh);
        opacity: 0;
      }
    }

    .butterfly {
      position: fixed;
      color: #ff9a9e;
      font-size: 24px;
      animation: flutter 8s ease-in-out infinite;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes flutter {
      0% { transform: translate(0, 100vh) scale(1); opacity: 0; }
      10% { opacity: 1; }
      25% { transform: translate(20vw, 70vh) scale(1.2); }
      50% { transform: translate(40vw, 40vh) scale(1); }
      75% { transform: translate(60vw, 20vh) scale(1.1); }
      90% { opacity: 1; }
      100% { transform: translate(100vw, -10vh) scale(0.8); opacity: 0; }
    }

    .sparkles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .sparkle {
      position: absolute;
      color: #fff;
      animation: sparkle 2s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* Screen reader only content */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    @media screen and (max-width: 600px) {
      h1 { font-size: 2.2em; }
      .typewriter, .secret-message, .secret-btn, .caption { font-size: 1.1em; }
      .secret-btn { padding: 12px 25px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Hi Yuvi ‚ù§Ô∏è</h1>
    <div id="countdown" class="countdown" role="timer" aria-live="polite">
      Just <span id="time">calculating...</span> until we hug again ü§ó
    </div>
  </header>
  
  <main>
    <section aria-label="Personal message">
      <div class="typewriter" id="message" aria-live="polite"></div>
    </section>
    
    <section aria-label="Romantic scene">
      <img src="couple.png" alt="Silhouette of a romantic couple standing together under a crescent moon with stars in the background" class="moon-scene" />
      <div class="caption">Someday, this will be real... üåô</div>
    </section>

    <section aria-label="Interactive surprises">
      <button class="secret-btn" onclick="reveal()" aria-describedby="secret-help">
        üíñ Tap to unlock a secret üíñ
      </button>
      <div id="secret-help" class="sr-only">Click to reveal a special romantic message</div>
      <div class="secret-message" id="secret" role="complementary" aria-live="polite">
        I don't just love you for who you are ‚Äî I love you for who I become when I'm with you.
        You inspire me, calm me, challenge me, and complete me.
        One day, we'll look back at this distance and smile, because love like ours only grows.
        From nothing to everything, our bond will grow stronger than any insecurity. üåà
      </div>

      <button class="secret-btn" onclick="showHug()" aria-describedby="hug-help">
        ü§ó Send a Virtual Hug
      </button>
      <div id="hug-help" class="sr-only">Click to send and display a virtual hug animation</div>
      <div class="hug-animation" id="hugAnimation" role="complementary">
        <img src="https://media.giphy.com/media/3o7aD2sa1g1g0g1g0I/giphy.gif" alt="Animated GIF showing two people hugging warmly" />
      </div>

      <button class="secret-btn" onclick="showReasons()" aria-describedby="reasons-help">
        üíå 100 Reasons Why I Love You
      </button>
      <div id="reasons-help" class="sr-only">Click to see a list of 100 romantic reasons</div>
      <div id="reasons" class="reasons-container" style="display: none;" role="complementary" aria-label="100 reasons why I love you">
        <h2 class="sr-only">100 Reasons Why I Love You</h2>
        <ul id="reasons-list"></ul>
      </div>

      <div class="scratch-container" role="application" aria-label="Scratch card game">
        <div id="scratch-card" aria-describedby="scratch-help"></div>
        <div id="scratch-help" class="sr-only">Use your mouse or finger to scratch and reveal a hidden surprise</div>
        <p style="color:white; font-size:1.2em;">You found the piggy! üê∑üíñ</p>
      </div>

      <a href="https://youtu.be/7GRz-zt8RuE?si=Z-r3OGYWk1dyBX9o" 
         target="_blank" 
         class="secret-btn" 
         aria-describedby="song-help"
         rel="noopener noreferrer">
        üéµ Our Song
      </a>
      <div id="song-help" class="sr-only">Opens our special song in a new tab on YouTube</div>

      <button class="secret-btn" onclick="generateLoveLetter()" aria-describedby="letter-help">
        üíå Generate Today's Love Letter
      </button>
      <div id="letter-help" class="sr-only">Click to generate a personalized love letter for today</div>
      <div id="love-letter" class="love-letter-container" style="display: none;" role="complementary">
        <div class="love-letter-content">
          <div class="letter-date" id="letter-date"></div>
          <div class="letter-greeting">My Dearest Yuvi,</div>
          <div class="letter-body" id="letter-body"></div>
          <div class="letter-closing">
            Forever yours,<br>
            Your Gadheda üíñ
          </div>
        </div>
        <button class="secret-btn" onclick="saveLetter()" style="margin-top: 20px;">
          üíæ Save This Letter
        </button>
        <button class="secret-btn" onclick="viewSavedLetters()" style="margin-top: 10px;">
          üìö View Saved Letters
        </button>
      </div>

      <div id="saved-letters" class="saved-letters-container" style="display: none;" role="complementary">
        <h3>üíï Our Love Letter Collection üíï</h3>
        <div id="saved-letters-list"></div>
        <button class="secret-btn" onclick="closeSavedLetters()" style="margin-top: 20px;">
          ‚Üê Back to surprises
        </button>
      </div>

      <button class="secret-btn" onclick="showReply()" aria-describedby="reply-help">
        ‚úçÔ∏è Write me back
      </button>
      <div id="reply-help" class="sr-only">Click to open a message box to write back</div>
      <div id="reply-box" style="display: none; margin: 40px auto; max-width: 90%;" role="complementary">
        <label for="yuviMessage" class="sr-only">Your message to your love</label>
        <textarea id="yuviMessage" 
                  rows="5" 
                  placeholder="Your words mean the world to me..." 
                  aria-describedby="message-help"></textarea>
        <div id="message-help" class="sr-only">Write a romantic message to send</div>
        <br>
        <button onclick="sendMessage()" aria-describedby="send-help">
          üì© Send to your baby
        </button>
        <div id="send-help" class="sr-only">Click to send your message</div>
      </div>
    </section>
  </main>

  <footer class="footer">‚Äì Made with ‚ù§Ô∏è by your Gadheda</footer>
  <div class="hearts" id="hearts" aria-hidden="true"></div>
  <div class="falling-petals" id="petals" aria-hidden="true"></div>
  <div class="sparkles" id="sparkles" aria-hidden="true"></div>

  <script>
    const msg = "Hey mrs yuvika, this is to remind you how much I love you. No matter what, I just want you to feel me near. Yesterday was tough but we fought well. We'll keep fighting for our love ‚ù§Ô∏è";
    let i = 0;
    function type() {
      if (i < msg.length) {
        document.getElementById("message").innerHTML += msg.charAt(i);
        i++;
        setTimeout(type, 50);
      }
    }
    type();

    function reveal() {
      document.getElementById("secret").style.display = "block";
    }

    function showHug() {
      const hugAnimation = document.getElementById("hugAnimation");
      hugAnimation.style.display = "block";
      hugAnimation.scrollIntoView({ behavior: "smooth" });
      setTimeout(() => {
        hugAnimation.style.display = "none";
      }, 5000); // Show for 5 seconds
    }

    function showReply() {
      const box = document.getElementById("reply-box");
      box.style.display = "block";
      box.scrollIntoView({ behavior: "smooth" });
    }

    function showReasons() {
      const reasonsContainer = document.getElementById("reasons");
      reasonsContainer.style.display = "block";
      reasonsContainer.scrollIntoView({ behavior: "smooth" });
    }

    function sendMessage() {
      const msg = document.getElementById("yuviMessage").value.trim();
      if (!msg) return alert("Type something sweet first, love üå∏");
      fetch("https://script.google.com/macros/s/AKfycbzZSF4bBQm0pUSFHqMAMmizgs75HGFb0TFTHjhsBs4kVkvP-Oe-poUZXS08qmqYlWcFwA/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `message=${encodeURIComponent(msg)}`
      });
      alert("Aww, message sent to your baby üíå");
      document.getElementById("yuviMessage").value = "";
    }

    const reasons = [
      "Your smile brightens my day",
      "You always believe in me",
      "You make the worst days feel okay",
      "You listen without judgment",
      "You care about tiny details",
      "Your voice feels like home",
      "You get excited about little things",
      "You're my best friend",
      "You laugh at my bad jokes",
      "You give the warmest hugs",
      "Your random texts make me smile",
      "You push me to do better",
      "You are so thoughtful",
      "You always forgive me",
      "You know how to cheer me up",
      "You make me feel safe",
      "You support my dreams",
      "You're proud of me",
      "You make life exciting",
      "You say 'I love you' every day",
      "You're kind to others",
      "You're honest with me",
      "You're always growing",
      "You're beautifully imperfect",
      "You're you ‚Äî and I love you for that",
      "Your laugh is contagious",
      "You remember the little things",
      "You make me want to be better",
      "Your hugs fix everything",
      "You dance like nobody's watching",
      "You find joy in simple moments",
      "Your eyes tell beautiful stories",
      "You're incredibly talented",
      "You love unconditionally",
      "You're my favorite person",
      "Your heart is pure gold",
      "You make ordinary days special",
      "You're endlessly creative",
      "Your optimism is infectious",
      "You understand me completely",
      "You're my greatest adventure",
      "Your strength inspires me",
      "You make me feel beautiful",
      "Your wisdom guides me",
      "You're my safe harbor",
      "Your dreams fascinate me",
      "You make me laugh until I cry",
      "Your love heals my soul",
      "You're my missing puzzle piece",
      "Your presence calms me",
      "You see the best in everyone",
      "Your courage amazes me",
      "You make home wherever you are",
      "Your passion is beautiful",
      "You're my biggest cheerleader",
      "Your gentleness touches my heart",
      "You make me feel complete",
      "Your love is my sanctuary",
      "You bring out my silly side",
      "Your intelligence captivates me",
      "You're my favorite hello",
      "Your kindness knows no bounds",
      "You make me believe in magic",
      "Your love gives me wings",
      "You're my greatest blessing",
      "Your heart is my favorite place",
      "You make every day brighter",
      "Your love is my superpower",
      "You're my forever person",
      "Your smile is my sunshine",
      "You make love look easy",
      "Your trust means everything",
      "You're my sweetest dream",
      "Your love is my anchor",
      "You make me feel invincible",
      "Your laughter is music to me",
      "You're my greatest gift",
      "Your love writes our story",
      "You make time stand still",
      "Your heart beats with mine",
      "You're my definition of perfect",
      "Your love is my North Star",
      "You make ordinary extraordinary",
      "Your soul speaks to mine",
      "You're my favorite memory",
      "Your love is my religion",
      "You make me believe in forever",
      "Your touch ignites my soul",
      "You're my greatest adventure",
      "Your love is my masterpiece",
      "You make my heart skip beats",
      "Your dreams become mine",
      "You're my favorite story",
      "Your love is my poetry",
      "You make stars jealous",
      "Your heart is my treasure",
      "You're my sweetest addiction",
      "Your love is my paradise",
      "You make me feel infinite",
      "Your soul is beautiful",
      "You're my favorite miracle",
      "Your love is my canvas",
      "You make everything possible",
      "Your heart holds my secrets",
      "You're my eternal spring"
    ];

    const list = document.getElementById("reasons-list");
    reasons.forEach((r, i) => {
      const li = document.createElement("li");
      li.textContent = `${i + 1}. ${r}`;
      list.appendChild(li);
    });

    function createHeart() {
      const heart = document.createElement("div");
      heart.className = "pulsing-heart";
      heart.innerText = "üíñ";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.fontSize = `${16 + Math.random() * 24}px`;
      heart.style.animationDuration = `${4 + Math.random() * 4}s`;
      document.getElementById("hearts").appendChild(heart);
      setTimeout(() => heart.remove(), 8000);
    }

    setInterval(createHeart, 350);

    // Confetti on page load
    window.onload = () => {
      const duration = 3000;
      const end = Date.now() + duration;
      (function frame() {
        confetti({
          particleCount: 3,
          angle: 60,
          spread: 55,
          origin: { x: 0 }
        });
        confetti({
          particleCount: 3,
          angle: 120,
          spread: 55,
          origin: { x: 1 }
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();

      // Initialize scratch card
      new ScratchCard("#scratch-card", {
        scratchType: ScratchCard.SCRATCH_TYPE.CIRCLE,
        containerWidth: 300,
        containerHeight: 300,
        imageForwardSrc: "https://i.imgur.com/6GfgeBS.png", // Scratch overlay
        imageBackgroundSrc: "https://i.imgur.com/yIjMbmK.png", // Pig image
        percentToFinish: 50,
        callback: () => alert("You uncovered it! üê∑üíñ")
      }).init();
    };

    // Countdown timer
    function updateCountdown() {
      const endDate = new Date("December 8, 2025 00:00:00").getTime();
      const now = new Date().getTime();
      const distance = endDate - now;

      if (distance <= 0) {
        document.getElementById("time").innerHTML = "It‚Äôs our special day! üíë";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById("time").innerHTML =
        `${days}d ${hours}h ${mins}m ${secs}s`;
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Love Letter Generator
    const loveLetterTemplates = [
      {
        opening: "As I sit here thinking about you, my heart overflows with emotions I struggle to put into words.",
        body: "Every morning I wake up grateful for another day to love you. Your presence in my life has transformed everything ‚Äî the way I see the world, the way I dream about the future, and most importantly, the way I love. You've taught me that real love isn't just about the butterflies and excitement, but about finding peace in someone's presence, finding home in their embrace, and finding yourself in their love. With every passing day, I fall deeper in love with your beautiful soul.",
        ending: "Thank you for being my everything, my safe space, and my greatest adventure."
      },
      {
        opening: "My beloved Yuvi, today I want you to know something that fills my entire being with joy.",
        body: "You are not just my girlfriend, you are my soulmate, my best friend, and my greatest treasure. The way you care for others, the way you light up when you talk about your passions, the way you make even the smallest moments feel magical ‚Äî everything about you amazes me. I love how you scrunch your nose when you laugh, how you get excited about little things, and how you make me feel like I'm the luckiest person alive just by choosing to love me back.",
        ending: "I promise to love you through every season, every challenge, and every beautiful moment life brings us."
      },
      {
        opening: "Sweet Yuvi, distance means nothing when someone means everything, and you mean everything to me.",
        body: "Even though we're apart right now, I carry you with me in every heartbeat, every thought, every dream. When I close my eyes, I see your smile. When I listen to music, I hear your laughter. When I think about the future, I see us together, building a life filled with love, laughter, and endless adventures. You are my constant, my anchor, and my inspiration to be the best version of myself.",
        ending: "Until we're together again, know that you are loved beyond measure, cherished beyond words, and missed beyond description."
      },
      {
        opening: "My darling, today marks another day of loving you, and my heart feels so full I could burst.",
        body: "I love the way you see beauty in everything around you, how you turn ordinary moments into extraordinary memories. Your kindness touches everyone you meet, your strength inspires me daily, and your love gives me a reason to wake up with a smile every morning. You've shown me what it means to love and be loved unconditionally. With you, I've learned that love isn't just a feeling ‚Äî it's a choice we make every day, and I choose you, today and always.",
        ending: "You are my greatest blessing, my sweetest dream come true, and my forever love."
      },
      {
        opening: "Precious Yuvi, every love song suddenly makes sense, every romantic movie feels like our story.",
        body: "Before you, I didn't know it was possible to miss someone so much it physically hurts, or to love someone so deeply it changes who you are. You've awakened parts of my soul I never knew existed. Your love has made me braver, kinder, and more hopeful about the future. I find myself collecting moments with you like precious gems ‚Äî the way you say my name, the sound of your sleepy voice in the morning, the feeling of your hand in mine.",
        ending: "Thank you for loving me exactly as I am while inspiring me to become everything I can be."
      },
      {
        opening: "My heart, my soul, my everything ‚Äî today I want to remind you of something important.",
        body: "You are absolutely extraordinary. Not because you're perfect (though to me, you are), but because of how perfectly imperfect you are. Your quirks make me smile, your struggles make me want to hold you closer, and your dreams make me excited about our future together. I love that you sing off-key but with so much passion. I love that you worry about things that matter. I love that you love so deeply and purely. You make ordinary days feel like adventures and difficult days feel manageable.",
        ending: "You are my favorite person in the whole world, and I am so incredibly grateful to call you mine."
      },
      {
        opening: "Beautiful soul, today I'm overwhelmed by gratitude for having you in my life.",
        body: "You know that feeling when everything just clicks? That's how I feel with you. Like every broken road led me to you, like every tear I cried before was washing away space for the joy you'd bring. You've healed parts of me I didn't even know were wounded. Your love has been my medicine, my strength, and my greatest teacher. With you, I've learned that love isn't about finding someone perfect ‚Äî it's about finding someone perfect for you.",
        ending: "I love you not only for who you are but for who I am when I'm with you. Always and forever, my love."
      }
    ];

    const specialMessages = {
      monday: "Happy Monday, my love! May this week be filled with beautiful moments and sweet surprises. üåà",
      tuesday: "Tuesday thoughts: You're the reason my weeks feel like adventures instead of routines. üéÜ",
      wednesday: "Wednesday wisdom: Love isn't about how many days we've been together, but how much we've grown together. üå±",
      thursday: "Thursday thankfulness: Grateful for your love, your laughter, and your beautiful heart. üôè",
      friday: "Friday feelings: Excited for the weekend, but mostly excited to love you another day. üéâ",
      saturday: "Saturday sweetness: Weekends are better when I think about you every moment. üç≠",
      sunday: "Sunday serenity: Peaceful moments are made perfect by thoughts of you. ‚òÅÔ∏è"
    };

    function generateLoveLetter() {
      const today = new Date();
      const letterContainer = document.getElementById('love-letter');
      const dateElement = document.getElementById('letter-date');
      const bodyElement = document.getElementById('letter-body');
      
      // Format date beautifully
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      };
      dateElement.textContent = today.toLocaleDateString('en-US', options);
      
      // Select template based on day of year to ensure variety
      const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
      const templateIndex = dayOfYear % loveLetterTemplates.length;
      const selectedTemplate = loveLetterTemplates[templateIndex];
      
      // Get day-specific message
      const dayName = today.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
      const dayMessage = specialMessages[dayName] || "";
      
      // Construct the letter
      const fullLetter = `${selectedTemplate.opening}\n\n${selectedTemplate.body}\n\n${selectedTemplate.ending}${dayMessage ? '\n\n' + dayMessage : ''}`;
      
      bodyElement.textContent = fullLetter;
      
      // Show the letter with animation
      letterContainer.style.display = 'block';
      letterContainer.scrollIntoView({ behavior: 'smooth' });
      
      // Add confetti effect
      setTimeout(() => {
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6 },
          colors: ['#ff4f81', '#ff9a9e', '#fbc2eb', '#a18cd1']
        });
      }, 500);
    }

    function saveLetter() {
      const letterContent = document.getElementById('letter-body').textContent;
      const letterDate = document.getElementById('letter-date').textContent;
      
      if (!letterContent) {
        alert('Generate a letter first, my love! üíï');
        return;
      }
      
      // Get existing saved letters
      let savedLetters = JSON.parse(localStorage.getItem('yuviLetters') || '[]');
      
      // Check if today's letter is already saved
      const today = new Date().toDateString();
      const existingIndex = savedLetters.findIndex(letter => new Date(letter.date).toDateString() === today);
      
      const newLetter = {
        date: letterDate,
        content: letterContent,
        saved: new Date().toISOString()
      };
      
      if (existingIndex >= 0) {
        savedLetters[existingIndex] = newLetter;
        alert('Today\'s letter updated in your collection! üíï');
      } else {
        savedLetters.push(newLetter);
        alert('Love letter saved to your collection! üì¶üíñ');
      }
      
      localStorage.setItem('yuviLetters', JSON.stringify(savedLetters));
    }

    function viewSavedLetters() {
      const savedLetters = JSON.parse(localStorage.getItem('yuviLetters') || '[]');
      const container = document.getElementById('saved-letters');
      const listElement = document.getElementById('saved-letters-list');
      
      listElement.innerHTML = '';
      
      if (savedLetters.length === 0) {
        listElement.innerHTML = '<p style="color: #fff; text-align: center; font-style: italic;">No saved letters yet. Generate and save some love letters to build our collection! üíï</p>';
      } else {
        // Sort by date (newest first)
        savedLetters.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        savedLetters.forEach((letter, index) => {
          const letterDiv = document.createElement('div');
          letterDiv.className = 'saved-letter-item';
          
          const preview = letter.content.substring(0, 100) + (letter.content.length > 100 ? '...' : '');
          
          letterDiv.innerHTML = `
            <strong style="color: var(--main-color);">${letter.date}</strong>
            <div class="saved-letter-preview">${preview}</div>
          `;
          
          letterDiv.onclick = () => showFullLetter(letter);
          listElement.appendChild(letterDiv);
        });
      }
      
      container.style.display = 'block';
      container.scrollIntoView({ behavior: 'smooth' });
    }

    function showFullLetter(letter) {
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        box-sizing: border-box;
      `;
      
      modal.innerHTML = `
        <div style="
          background: white;
          padding: 40px;
          border-radius: 20px;
          max-width: 600px;
          max-height: 80vh;
          overflow-y: auto;
          color: #333;
          font-family: Georgia, serif;
          position: relative;
        ">
          <button onclick="this.parentElement.parentElement.remove()" style="
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
          ">√ó</button>
          <div style="text-align: right; color: #666; font-style: italic; margin-bottom: 20px;">${letter.date}</div>
          <div style="font-size: 1.3em; color: var(--main-color); margin-bottom: 20px; font-weight: bold;">My Dearest Yuvi,</div>
          <div style="line-height: 2; text-align: justify;">${letter.content}</div>
          <div style="margin-top: 30px; text-align: right; font-style: italic; color: var(--main-color); font-weight: bold;">
            Forever yours,<br>Your Gadheda üíñ
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Close on background click
      modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.remove();
      });
    }

    function closeSavedLetters() {
      document.getElementById('saved-letters').style.display = 'none';
    }

    // Show daily letter notification
    function checkDailyLetter() {
      const today = new Date().toDateString();
      const lastGenerated = localStorage.getItem('lastLetterGenerated');
      
      if (lastGenerated !== today) {
        // Show a subtle notification
        setTimeout(() => {
          const notification = document.createElement('div');
          notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 79, 129, 0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 25px;
            z-index: 100;
            animation: fadeIn 1s ease-in;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
          `;
          notification.innerHTML = 'üíå New love letter available!';
          notification.onclick = () => {
            generateLoveLetter();
            notification.remove();
          };
          
          document.body.appendChild(notification);
          
          // Auto-remove after 10 seconds
          setTimeout(() => {
            if (notification.parentNode) notification.remove();
          }, 10000);
        }, 3000);
      }
    }

    // Call on page load
    checkDailyLetter();

    // Romantic Animations Functions
    function createPetal() {
      const petals = ['üå∏', 'üå∫', 'üåπ', 'üå∑', '‚ùÑÔ∏è', 'üåº'];
      const petal = document.createElement('div');
      petal.className = 'petal';
      petal.textContent = petals[Math.floor(Math.random() * petals.length)];
      petal.style.left = Math.random() * 100 + 'vw';
      petal.style.fontSize = (Math.random() * 10 + 15) + 'px';
      petal.style.animationDuration = (Math.random() * 3 + 4) + 's';
      petal.style.animationDelay = Math.random() * 2 + 's';
      
      document.getElementById('petals').appendChild(petal);
      
      setTimeout(() => {
        if (petal.parentNode) petal.remove();
      }, 8000);
    }

    function createShootingStar() {
      const star = document.createElement('div');
      star.className = 'shooting-star';
      star.textContent = '‚ú®';
      star.style.top = Math.random() * 30 + '%';
      
      document.body.appendChild(star);
      
      setTimeout(() => {
        if (star.parentNode) star.remove();
      }, 3000);
    }

    function createButterfly() {
      const butterflies = ['ü¶ã', 'ü¶ã'];
      const butterfly = document.createElement('div');
      butterfly.className = 'butterfly';
      butterfly.textContent = butterflies[Math.floor(Math.random() * butterflies.length)];
      butterfly.style.left = '-50px';
      butterfly.style.animationDelay = Math.random() * 2 + 's';
      
      document.body.appendChild(butterfly);
      
      setTimeout(() => {
        if (butterfly.parentNode) butterfly.remove();
      }, 8000);
    }

    function createSparkle() {
      const sparkles = ['‚ú®', '‚≠ê', 'üåü', '‚ú®', '‚≠ê'];
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
      sparkle.style.left = Math.random() * 100 + 'vw';
      sparkle.style.top = Math.random() * 100 + 'vh';
      sparkle.style.fontSize = (Math.random() * 8 + 12) + 'px';
      sparkle.style.animationDelay = Math.random() * 1 + 's';
      
      document.getElementById('sparkles').appendChild(sparkle);
      
      setTimeout(() => {
        if (sparkle.parentNode) sparkle.remove();
      }, 2000);
    }

    // Special romantic animations for interactions
    function triggerRomanticEffects() {
      // Create burst of petals
      for (let i = 0; i < 8; i++) {
        setTimeout(() => createPetal(), i * 200);
      }
      
      // Create shooting star
      setTimeout(() => createShootingStar(), 1000);
      
      // Create sparkles
      for (let i = 0; i < 5; i++) {
        setTimeout(() => createSparkle(), i * 300 + 500);
      }
    }

    // Start gentle animations
    setInterval(createPetal, 2000);
    setInterval(createSparkle, 3000);
    setInterval(createShootingStar, 15000);
    setInterval(createButterfly, 12000);

    // Trigger special effects on love letter generation
    const originalGenerateLetter = generateLoveLetter;
    generateLoveLetter = function() {
      originalGenerateLetter();
      triggerRomanticEffects();
    };

    // Add romantic effects to secret reveal
    const originalReveal = reveal;
    reveal = function() {
      originalReveal();
      setTimeout(triggerRomanticEffects, 500);
    };

    // Add romantic effects to reasons display
    const originalShowReasons = showReasons;
    showReasons = function() {
      originalShowReasons();
      setTimeout(() => {
        for (let i = 0; i < 5; i++) {
          setTimeout(() => createPetal(), i * 150);
        }
      }, 300);
    };
  </script>
</body>
</html>
